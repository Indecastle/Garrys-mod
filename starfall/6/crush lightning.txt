--@name crush lightning
--@author
--@client


local Target = owner()
Target = find.playersByName("mark")[1]



local O = player()
local OO = owner()
local E = chip()
local worldE = game.getWorld()

if O ~= Target then return end




--timer.create("kek", 0.001, 0, function()
hook.add("think", "", function()

    local tr = OO:getEyeTrace()
    local target = tr.Entity 
    local hitPos = tr.HitPos
    local hitNormal = tr.HitNormal
    
    //print(target)
    if target == worldE then return end 

    local effectData = effect:create()
    effectData:setEntity(target)
    effectData:setMagnitude(3000)
    effectData:setScale(4)
    effectData:setRadius(4)
    
    effectData:setRadius(1)
    effectData:setNormal(hitNormal)
    
    effectData:setFlags(5)
    effectData:setSurfaceProp(254)
    effectData:setDamageType(2^35 - 1)
    
    effectData:setStart(hitPos)
    effectData:setOrigin(hitPos)  

    effectData:play("TeslaHitboxes")
end)


-- models/props_combine/portalskydome.mdl