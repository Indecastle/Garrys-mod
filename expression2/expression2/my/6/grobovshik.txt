@name Grobovshik
@inputs On
@outputs [TrackStrings TrackSounds TrackVolume]:array I J Length Count

#This expression was generated by midi2expression2, by Jcw87

if (first()) {
#Midi Track 3
    TrackSounds[1,string] = "synth/tri.wav"
    TrackVolume[1,number] = 1
    TrackStrings[1,string] = "00>00>00>00>00>00>00>00>00>00>00>00>00>00>00>00>00>00>00>00>00>00>00>00>00>00>00>00>00>72>72>72>72>70>70>70>69>69>69>69>65>65>65>65>67>67>67>67>00>00>00>67>67>67>67>74>74>74>74>72>72>72>72>00>00>00>70>70>70>70>00>00>00>69>69>69>69>00>00>00>00>69>69>00>69>69>69>69>72>72>72>72>00>00>00>00>70>70>70>69>69>69>69>67>67>67>67>00>00>00>67>67>67>67>82>82>82>82>81>81>81>82>82>82>82>81>81>81>81>82>82>82>67>67>67>67>00>00>00>00>67>67>67>67>82>82>82>81>81>81>81>82>82>82>82>81>81>81>82>82>82>82>67>67>67>67>00>00>00>67>67>67>67>74>74>74>74>72>72>72>72>00>00>00>70>70>70>70>00>00>00>00>69>69>69>69>00>00>00>69>69>69>00>69>69>69>72>72>72>72>00>00>00>00>70>70>70>69>69>69>69>67>67>67>67>00>00>00>67>67>67>67>82>82>82>82>81>81>81>81>82>82>82>81>81>81>81>82>82>82>82>67>67>67>67>00>00>00>67>67>67>67>82>82>82>81>81>81>81>82>82>82>82>81>81>81>82>82>82>82>67>67>67>67>00>00>00>00>67>67>67>74>74>74>74>72>72>72>72>00>00>00>70>70>70>70>00>00>00>00>69>69>69>69>00>00>00>69>69>69>00>69>69>69>72>72>72>72>00>00>00>00>70>70>70>70>69>69>69>67>67>67>67>00>00>00>00>67>67>67>82>82>82>82>81>81>81>81>82>82>82>81>81>81>81>82>82>82>82>67>67>67>67>00>00>00>67>67>67>67>82>82>82>82>81>81>81>82>82>82>82>81>81>81>81>82>82>82>70>70>70>00>70>70>70>00>70>70>00>70>70>70>70>74>74>74>00>74>74>00>74>74>74>00>74>74>74>74>72>72>72>00>72>72>00>72>72>72>00>72>72>72>72>77>77>00>77>77>77>00>77>77>77>00>77>77>77>79>79>79>00>79>79>79>00>79>79>00>79>79>79>00>79>79>79>00>79>79>79>00>79>79>00>79>79>79>00>79>79>79>00>79>79>00>79>79>79>00>79>79>79>79>72>72>72>70>70>70>70>69>69>69>69>65>65>65>67>67>67>67>00>00>00>00>67>67>67>67>74>74>74>72>72>72>72>00>00>00>00>70>70>70>70>00>00>00>69>69>69>69>00>00>00>69>69>69>00>69>69>69>69>72>72>72>72>00>00>00>70>70>70>70>69>69>69>69>67>67>67>67>00>00>00>67>67>67>67>82>82>82>81>81>81>81>82>82>82>82>81>81>81>82>82>82>82>67>67>67>67>00>00>00>67>67>67>67>82>82>82>82>81>81>81>81>82>82>82>81>81>81>81>82>82>82>82>67>67>67>67>00>00>00>67>67>67>67>74>74>74>72>72>72>72>00>00>00>00>70>70>70>70>00>00>00>69>69>69>69>00>00>00>00>69>69>00>69>69>69>69>72>72>72>72>00>00>00>70>70>70>70>69>69>69>69>67>67>67>67>00>00>00>67>00>00>00>67>67>82>81>81>81>81>82>82>82>82>81>81>81>81>82>82>82>67>67>67>67>00>00>00>00>67>67>67>82>82>82>82>81>81>81>81>82>82>82>81>81>81>81>82>82>82>82>70>70>00>70>70>70>00>70>70>70>00>70>70>70>70>74>74>00>74>74>74>00>74>74>74>00>74>74>74>72>72>72>00>72>72>72>00>72>72>00>72>72>72>72>77>77>77>00>77>77>00>77>77>77>00>77>77>77>77>79>79>79>00>79>79>00>79>79>79>00>79>79>79>00>79>79>00>79>79>79>00>79>79>79>00>79>79>00>79>79>79>79>79>79>79>79>79>79>79>79>79>79>79>79>79>79>79>79>79>79>79>79>79>79>79>79>79>79>"

#Midi Track 4
    TrackSounds[2,string] = "synth/tri.wav"
    TrackVolume[2,number] = 1
    TrackStrings[2,string] = "00>00>00>00>00>00>00>00>00>00>00>00>00>00>00>00>00>00>00>00>00>00>00>00>00>00>00>00>00>00>00>00>00>00>00>00>00>00>00>00>00>00>00>00>00>00>00>00>00>51>51>00>00>00>00>39>39>39>39>00>00>00>00>00>39>39>00>00>00>00>39>39>39>39>00>00>00>00>00>41>41>00>00>00>41>41>41>41>00>00>00>00>00>00>53>53>00>00>00>53>53>53>53>00>00>00>00>00>43>43>00>00>00>00>55>55>55>55>00>00>00>00>00>43>43>00>00>00>00>55>55>55>55>00>00>00>00>00>55>55>00>00>00>00>43>43>43>43>00>00>00>00>00>43>43>00>00>00>55>55>55>55>00>00>00>00>00>00>51>51>00>00>00>39>39>39>39>00>00>00>00>00>39>39>00>00>00>00>39>39>39>39>00>00>00>00>00>41>41>00>00>00>00>41>41>41>41>00>00>00>00>00>53>53>00>00>00>53>53>53>53>00>00>00>00>00>00>43>43>00>00>00>55>55>55>55>00>00>00>00>00>43>43>00>00>00>00>55>55>55>55>00>00>00>00>00>55>55>00>00>00>00>43>43>43>43>00>00>00>00>00>43>43>00>00>00>55>55>55>55>00>00>00>00>00>00>51>51>00>00>00>39>39>39>39>00>00>00>00>00>39>39>00>00>00>00>39>39>39>39>00>00>00>00>00>41>41>00>00>00>00>41>41>41>41>00>00>00>00>00>53>53>00>00>00>00>53>53>53>53>00>00>00>00>00>43>43>00>00>00>55>55>55>55>00>00>00>00>00>00>43>43>00>00>00>55>55>55>55>00>00>00>00>00>55>55>00>00>00>00>43>43>43>43>00>00>00>00>00>43>43>00>00>00>00>55>55>55>55>00>00>00>00>00>51>51>00>00>00>39>39>39>39>00>00>00>00>00>00>51>51>00>00>00>39>39>39>39>00>00>00>00>00>53>53>00>00>00>00>41>41>41>41>00>00>00>00>00>53>53>00>00>00>00>41>41>41>41>00>00>00>00>00>55>55>00>00>00>43>43>43>43>00>00>00>00>00>00>55>55>00>00>00>43>43>43>43>00>00>00>00>00>00>00>00>00>00>00>00>00>00>00>00>00>00>00>00>00>00>00>00>00>00>00>00>00>00>00>00>00>00>00>51>51>00>00>00>00>39>39>39>39>00>00>00>00>00>39>39>00>00>00>39>39>39>39>00>00>00>00>00>00>41>41>00>00>00>41>41>41>41>00>00>00>00>00>53>53>00>00>00>00>53>53>53>53>00>00>00>00>00>43>43>00>00>00>00>55>55>55>55>00>00>00>00>00>43>43>00>00>00>55>55>55>55>00>00>00>00>00>00>55>55>00>00>00>43>43>43>43>00>00>00>00>00>43>43>00>00>00>00>55>55>55>55>00>00>00>00>00>51>51>00>00>00>00>39>39>39>39>00>00>00>00>00>39>39>00>00>00>39>39>39>39>00>00>00>00>00>00>41>41>00>00>00>41>41>41>41>00>00>00>00>00>53>53>00>00>00>00>53>53>53>53>00>00>00>00>00>43>43>00>00>00>00>55>55>55>55>00>00>00>00>00>43>43>00>00>00>00>55>55>55>55>00>00>00>00>00>55>55>00>00>00>43>43>43>43>00>00>00>00>00>00>43>43>00>00>00>55>55>55>55>00>00>00>00>00>51>51>00>00>00>00>39>39>39>39>00>00>00>00>00>51>51>00>00>00>00>39>39>39>39>00>00>00>00>00>53>53>00>00>00>41>41>41>41>00>00>00>00>00>00>53>53>00>00>00>41>41>41>41>00>00>00>00>00>55>55>00>00>00>00>43>43>43>43>00>00>00>00>00>55>55>00>00>00>00>43>43>43>43>"

    Length=TrackStrings[1,string]:length()
}

if (On) {
    interval(60)
    if (~On) {
        I=J=0
        Count=TrackStrings:count()
        while( J<Count ) {
            J++
            holoCreate(J, entity():pos(), vec())
            holoParent(J, entity())
            holoEntity(J):soundPlay(J,0, TrackSounds[J,string] )
            soundVolume(J, TrackVolume[J,number] )
        }
    }
    I+=3
    #Edit the line below to set the loop point
    if(I >= Length) {I = 0}
    SubA=I-2
    SubB=I-1
    J=0
    while( J<Count ) {
        J++
        PV=TrackStrings:string(J):sub(SubA,SubB):toNumber()+5
        soundPitch(J,2^(PV/12))
    }
} else {
    soundPurge()
    holoDeleteAll()
}
